<!DOCTYPE html>
<html lang="en" ng-app="NewGameApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NewGame</title>

	<!--Frameworks-->
	<!--Bootstrap-->
	<link href="../vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/> 
	<!--JQuery-->
	<script src="../vendors/jquery/jquery-3.1.1.min.js" type="text/javascript" xml:space="preserve"></script>
	<!--Angular-->
	<script src="../vendors/angular/angular.min.js" type="text/javascript" xml:space="preserve"></script>
	<!--Angular Translate-->
	<script src="../vendors/angular-translate/angular-translate.js" type="text/javascript" xml:space="preserve"></script>
  	<script src="../vendors/angular-translate/angular-translate.min.js" type="text/javascript" xml:space="preserve"></script>
  	<!--Angular pagination-->
  	<script src="../vendors/angular/dirPagination.js" type="text/javascript" xml:space="preserve"></script>
	<!-- Angular Route -->
	<script src="../vendors/angular-route/angular-route.js" type="text/javascript" xml:space="preserve"></script>
	<!--Angular-Bootstrap-->
	<script src="../vendors/bootstrap/js/ui-bootstrap-tpls-2.3.1.min.js" type="text/javascript" xml:space="preserve"></script>
	<!-- Dropdown menu -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<!-- Css -->
	<link rel="stylesheet" type="text/css" href="../css/common.css">
	<link rel="stylesheet" type="text/css" href="../css/chat.css">

	<!-- app -->
    <script src="../js/app.js" type="text/javascript" xml:space="preserve"></script>
	<script src="../js/controller/chat.js" type="text/javascript" xml:space="preserve"></script>

	<!-- model -->
    <script src="../js/model/User.js" type="text/javascript" xml:space="preserve"></script>
    <script src="../js/model/Chat.js" type="text/javascript" xml:space="preserve"></script>
</head>

<body  ng-init="chatCtrl.checkHistorial()" ng-controller="chatController as chatCtrl">
	<main>
		<div class="container">
			<div class="row">
				<nav id="myNavbar" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
					<div class="navbar-header">
						<a class="navbar-brand" href="/index.html"><i class="glyphicon glyphicon-user"></i> David</a>
					</div>                
				</nav>
			</div> 

			<div class="row">
				<div ng-repeat="chat in chats">
					<div class="well userMessage" ng-if="chat.getIdUser()==user.getId()">{{chat.getText()}}</div>
					<div class="well friendMessage" ng-if="chat.getIdUser()==friend.getId()">{{chat.getText()}}</div>
				</div>
			</div> 
     
			<div class="row">
				<nav class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">


					<form method="post" name="chatManagement" novalidate ng-submit="chatManagement.$valid && !chatCtrl.send()">
						<div class="form-group">
							<div class="col-xs-11 col-sm-11 col-md-11 col-lg-11">
								<textarea name="text" ng-model="chatCtrl.text" class="form-control noresize" rows="2"  placeholder="Write here your message" required></textarea>
							</div>
							<small ng-if="!message.text && !chatManagement.text.$pristine">Text area can't be blank</small>
						</div>
						<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">
							<button type="submit" class="btn btn-primary" name="insert_message" value="ok" ng-disabled="chatManagement.$invalid" ng-click="chatCtrl.send()"><span class="glyphicon glyphicon-send"></span> Send</button>
						</div>
					</form>


				</nav>
			</div>
		</div>
	</main>
</body>
</html>